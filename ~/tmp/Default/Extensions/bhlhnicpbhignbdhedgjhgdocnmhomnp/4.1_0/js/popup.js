/*!
   This file is part of ColorZilla

   Written by Alex Sirota (alex @ iosart.com)

   Copyright (c) iosart labs llc 2011, All Rights Reserved

   Please do not use without permission
*/
var ColorZilla,browser=chrome||browser,cz=ColorZilla=void 0!==ColorZilla&&ColorZilla?ColorZilla:{},localStorageData={};cz.Popup={"init":async function(){cz.Popup.migrateLocalStorageIfNeeded(),cz.Popup.setupListeners();var e=await browserPromise.runtime.sendMessage({"op":"get-options"}),o=(this.globalOptions=e,cz.gbCZLowerCaseHexa=e.lowercaseHexa,await browserPromise.runtime.sendMessage({"op":"get-current-color"})),o=(cz.Popup._sampledColor=o.color,cz.Popup._currentColor=cz.Popup._sampledColor,browser.storage.local.get(null,function(e){localStorageData=e}),cz.Popup._currentColor&&(cz.Popup.setActiveColorAndData(cz.Popup._currentColor),cz.Popup.updateCopyToClipboardMenu()),cz.Popup.colorAnalyzerUI=cz.ColorAnalyzerUI,{"container":$("#webpage-color-analyzer-panel"),"setColorCallback":cz.Popup.setSampledColor,"highlightElementsByColorCallback":e=>{browser.runtime.sendMessage({"op":"highlight-elements-by-color","colorRef":e})},"analyzePageColorsCallback":()=>{browser.runtime.sendMessage({"op":"analyze-page-colors"})},"closeCallback":cz.Popup.onMainPanelClose});cz.Popup.colorAnalyzerUI.init(o),browser.runtime.sendMessage({"op":"clear-monitoring-highlights"}),e.autostartEyedropper?setTimeout(function(){cz.Popup.startMonitoring()},20):(cz.Popup.stopMonitoring(),browser.runtime.sendMessage({"op":"cache-screenshot"})),cz.Popup.handleBlockedInjection(function(){cz.Popup.attachEventHandlers()})},"checkForInvalidBackgroundServiceWorker":async function(){var e;let o=!0;try{console.log("sending ping"),e=await Promise.race([browser.runtime.sendMessage({"op":"ping-service-worker"}),new Promise((e,o)=>setTimeout(()=>{o(new Error("timeout"))},4e3))]),console.log(e),"pong"!=e?.pong&&(o=!1)}catch(e){o=!1}o||console.log("Service worker seems to be in an invalid state, reloading extension...")},"migrateLocalStorageIfNeeded":function(){if(0!=localStorage.length){var o={};for(let e=0;e<localStorage.length;e++){var t=localStorage.key(e),r=localStorage.getItem(t);"version"!=t&&(o[t]=r)}browser.storage.local.set(o,function(){browser.runtime.sendMessage({"op":"options-changed"}),browser.runtime.sendMessage({"op":"history-persisted"})}),localStorage.clear()}},"setupListeners":function(){browser.runtime.onMessage.addListener(function(e,o,t){switch(e.op){case"populate-page-analyzer-colors":cz.Popup.colorAnalyzerUI.populatePageAnalyzerColors(e.colors),t({"res":!0});break;case"close-popup":window.close(),t({"res":!0});break;case"set-popup-active-color":cz.Popup.setActiveColorAndData(e.color,e.data),t({"res":!0});break;case"mouse-is-over-popup":t({"mouseIsOverPopup":cz.Popup.mouseIsOverPopup})}})},"initUI":async function(){this.translateUI(),await NewFeaturesBadge.showAll(),browser.i18n.getMessage("locale").match(/^en/)?browser.i18n.getUILanguage().match(/^en/)||($(".help-translate-separator").css("display","block"),$("#help-translate-menuitem").css("display","block")):($(".report-translation-issue-separator").css("display","block"),$("#report-translation-issue-menuitem").css("display","block")),"EyeDropper"in window||$("#system-eyedropper-menuitem").hide()},"translateUI":async function(){var e=cz.BrowserUtils.i18nReplace;e("#eyedropper-menuitem .menu-item-text","pick_color_from_page"),e("#system-eyedropper-menuitem .menu-item-text","pick_color_from_outside_the_browser"),e("#color-picker-menuitem .menu-item-text","color_picker_panel"),e("#show-copy-to-clipboard-menuitem .menu-item-text","copy_to_clipboard_menu_label"),e("#resample-last-location-menuitem .menu-item-text","resample_last_location"),e("#show-history-menuitem .menu-item-text","picked_color_history"),e("#page-color-analyzer-menuitem .menu-item-text","webpage_color_analyzer"),e("#palette-browser-menuitem .menu-item-text","palette_browser"),e("#gradient-generator-menuitem .menu-item-text","css_gradient_generator"),e("#help-menuitem .menu-item-text","help"),e("#options-menuitem .menu-item-text","options"),e("#report-translation-issue-menuitem .menu-item-text","report_translation_issue"),e("#help-translate-menuitem .menu-item-text","help_translate_colorzilla"),e("#online-help-menuitem .menu-item-text","online_help"),e("#whats-new-menuitem .menu-item-text","whats_new"),e("#colorzilla-homepage-menuitem .menu-item-text","colorzilla_homepage"),e("#about-colorzilla-menuitem .menu-item-text","about_colorzilla"),e("#webpage-color-analyzer-panel h1","css_color_analysis_results"),e("#system-eyedropper-panel .sampling","pick_color_from_anywhere"),e(".ok-button","ok"),e(".cancel-button","cancel")},"attachEventHandlers":function(){addEventListener("unload",function(e){browser.runtime.sendMessage({"op":"on-popup-close"})},!0),document.addEventListener("click",function(e){cz.Popup.handleClick(e);var o=0<$(e.target).closest("#eyedropper-menuitem").length,e=0<$(e.target).closest("#system-eyedropper-menuitem").length;o||e||cz.Popup.stopMonitoring()},!0),cz.Popup.mouseIsOverPopup=!1,$(document).bind("mouseenter mousemove",async function(){cz.Popup.mouseIsOverPopup||(cz.Popup.mouseIsOverPopup=!0,cz.Popup._sampledColor&&await browserPromise.runtime.sendMessage({"op":"update-color","color":cz.Popup._sampledColor}),await browserPromise.runtime.sendMessage({"op":"clear-monitoring-highlights"}))}),$(document).mouseleave(function(){cz.Popup.mouseIsOverPopup=!1})},"handleClick":function(e){e=$(e.target).closest(".menu-item");if(0!=e.length&&!e.hasClass("disabled")){var o,e=e.attr("id");if(e)if(e.match(/^copy-(.*)-menuitem/))o=RegExp.$1,cz.BrowserUtils.copyToClipboard(cz.czCSSColToSpecificColorFormat(cz.Popup._currentColor,o)),setTimeout(()=>window.close(),20);else{var t=cz.BrowserUtils.getBrowser();switch(e){case"system-eyedropper-menuitem":cz.Popup.startSystemEyeDropper();break;case"color-picker-menuitem":cz.Popup.showColorPicker();break;case"eyedropper-menuitem":setTimeout(async function(){await cz.Popup.startMonitoring(),setTimeout(function(){window.close()},100)},20);break;case"gradient-generator-menuitem":cz.BrowserUtils.openURLInNewTab(cz.BrowserUtils.getLocalizedURL("https://www.colorzilla.com","/gradient-editor/")),window.close();break;case"page-color-analyzer-menuitem":$("#main-menu").hide(),cz.ColorAnalyzerUI.showPageAnalyzerPanelAndAnalyze();break;case"options-menuitem":cz.BrowserUtils.openURLInNewTab("/html/options.html"),window.close();break;case"help-menuitem":$("#main-menu").hide(),$("#help-menu").show();break;case"online-help-menuitem":cz.BrowserUtils.openURLInNewTab(cz.BrowserUtils.getLocalizedURL("https://www.colorzilla.com",`/${t}/help`)),window.close();break;case"whats-new-menuitem":cz.BrowserUtils.openURLInNewTab(cz.BrowserUtils.getLocalizedURL("https://www.colorzilla.com",`/${t}/versions`)),window.close();break;case"colorzilla-homepage-menuitem":cz.BrowserUtils.openURLInNewTab(cz.BrowserUtils.getLocalizedURL("https://www.colorzilla.com",`/${t}/`)),window.close();break;case"report-translation-issue-menuitem":case"help-translate-menuitem":cz.BrowserUtils.openURLInNewTab(cz.BrowserUtils.getLocalizedURL("https://www.colorzilla.com",`/${t}/localized`)),window.close();break;case"about-colorzilla-menuitem":cz.BrowserUtils.openURLInNewTab("/html/about.html"),window.close();break;case"show-copy-to-clipboard-menuitem":$("#main-menu").hide(),$("#copy-to-clipboard-menu").show();break;case"resample-last-location-menuitem":browser.runtime.sendMessage({"op":"resample-last-location"});break;case"show-history-menuitem":cz.Popup.showColorPicker();break;case"palette-browser-menuitem":var r={"container":$("#palette-browser-panel"),"setColorCallback":cz.Popup.setSampledColor,"closeCallback":cz.Popup.onMainPanelClose};$("#main-menu").hide(),cz.PaletteBrowser.show(r);break;case"error-message-menuitem":browser.tabs.create({"url":"chrome://extensions/?id="+browser.runtime.id})}}}},"close":function(){window.close()},"startMonitoring":async function(){cz.Popup.dropperDisabled||(await browserPromise.runtime.sendMessage({"op":"start-monitoring"}),$("#eyedropper-menuitem .menu-item-text").text(browser.i18n.getMessage("page_color_picker_active")),$("#eyedropper-menuitem").addClass("active"))},"stopMonitoring":function(){browser.runtime.sendMessage({"op":"stop-monitoring"}),$("#eyedropper-menuitem .menu-item-text").text(browser.i18n.getMessage("pick_color_from_page")),$("#eyedropper-menuitem").removeClass("active")},"showColorPicker":function(){var e={"container":$("#colorpicker"),"initialColor":cz.Popup._currentColor,"setColorCallback":cz.Popup.setSampledColor,"closeCallback":cz.Popup.onMainPanelClose,"history":cz.ColorHistory,"lowercaseHexa":cz.gbCZLowerCaseHexa};$("#main-menu").hide(),cz.ColorPickerUI.show(e)},"onMainPanelClose":function(){$("#main-menu").show()},"setSampledColor":function(e){cz.Popup._currentColor=cz.Popup._sampledColor=e,browser.runtime.sendMessage({"op":"update-color","color":e,"origOp":"color-sampled"})},"setActiveColorAndData":function(e,o){var t,r;o&&o.op&&"sampling-color"==o.op||(cz.Popup._currentColor=e,t=cz.czRGBHexaAttributeToCol(e),t=cz.czColToRGBAttribute(t)+"   |   "+e+"   |   "+cz.czColToHSLAttribute(t),(r=$("#color-picker-menuitem .current-color")).css("background-color",e).show(),r.attr("title",t),$("#color-picker-menuitem").addClass("color-selected"),o&&o.op&&"color-sampled"==o.op&&(cz.Popup._sampledColor=e),cz.Popup.updateCopyToClipboardMenu())},"updateCopyToClipboardMenu":function(){var e=cz.czRGBHexaAttributeToCol(cz.Popup._currentColor);function o(e){return browser.i18n.getMessage("copy_with_param",e)}$("#copy-rgb-menuitem .menu-item-text").text(o(cz.czColToRGBAttribute(e))).parent().show(),$("#copy-rgba-menuitem .menu-item-text").text(o(cz.czColToRGBAAttribute(e,1))).parent().show(),$("#copy-rgb-perc-menuitem .menu-item-text").text(o(cz.czColToRGBPercentageAttribute(e))).parent().show(),$("#copy-hsl-menuitem .menu-item-text").text(o(cz.czColToHSLAttribute(e))).parent().show(),$("#copy-hex-menuitem .menu-item-text").text(o(cz.czColToRGBHexaAttribute(e))).parent().show(),$("#copy-hex-no-hash-menuitem .menu-item-text").text(o(cz.czColToRGBHexaAttribute(e).substring(1))).parent().show(),$(".current-color-ops-separator").show(),$("#show-copy-to-clipboard-menuitem").show(),$("#resample-last-location-menuitem").show()},"handleBlockedInjection":function(r,l){cz.Popup.dropperDisabled=!1,browser.tabs.query({"active":!0,"currentWindow":!0},function(e){var e=e[0],o=null,t="disabled";if(0==e.url.indexOf("chrome"))o=browser.i18n.getMessage("chrome_doesn_allow_picking_special_page");else if(0==e.url.indexOf("https://chrome.google.com/extensions")||0==e.url.indexOf("https://chrome.google.com/webstore"))o=browser.i18n.getMessage("chrome_doesn_allow_picking_webstore");else if(0==e.url.indexOf("file")){e=cz.BrowserUtils.getBrowser();if("chrome"!=e)return;if(void 0===l)return void browser.extension.isAllowedFileSchemeAccess(function(e){cz.Popup.handleBlockedInjection(r,e)});l||(o="chrome"==e?browser.i18n.getMessage("allow_access_to_file_urls"):browser.i18n.getMessage("chrome_doesn_allow_picking_local"),t="")}o&&(cz.Popup.dropperDisabled=!0,cz.Popup.stopMonitoring(),"disabled"!=t?$("#main-menu").prepend('<div class="menu-item '+t+'" id="error-message-menuitem"><span class="menu-item-text">'+o+"</span></div>"):((e=document.createElement("span")).className="warning",e.title=o,$("#eyedropper-menuitem").append(e)),$("#resample-last-location-menuitem").addClass("disabled"),$("#eyedropper-menuitem").addClass("disabled"),$("#page-color-analyzer-menuitem").addClass("disabled"))}),r()},"startSystemEyeDropper":async function(){$("#main-menu").hide(),$("#system-eyedropper-panel").show();$("#system-eyedropper-panel").width();let t=null;try{var r=new EyeDropper;t=await r.open(),cz.Popup.stopMonitoring()}catch(e){cz.Popup.stopMonitoring(),setTimeout(()=>window.close(),20)}if(t){var l,r=t.sRGBHex;this.setSampledColor(r),$("#system-eyedropper-panel .colorzilla-copied-color-square").css("background-color",r);let e,o;o=this.globalOptions.autocopyToClipboard?(l=cz.czCSSColToSpecificColorFormat(r,this.globalOptions.autocopyColorFormat),cz.BrowserUtils.copyToClipboard(l),e=browser.i18n.getMessage("color_copied_to_clipboard"),l):(e=browser.i18n.getMessage("color_picked"),r),$("#system-eyedropper-panel .colorzilla-copied-message .colorzilla-copied-message-text").text(e),$("#system-eyedropper-panel .colorzilla-copied-message .colorzilla-copied-color").text(o),$("#system-eyedropper-panel .sampling").hide(),$("#system-eyedropper-panel .colorzilla-color-copied-container").show(),setTimeout(()=>window.close(),2e3)}}},cz.ColorPickerUI={"show":async function(e){for(var o=(this._options=e).initialColor,t=e.container,r=e.setColorCallback,l=e.lowercaseHexa,a=this,e=(a._container=t,a._widget=t.find(".colorpicker-widget"),o=o||"#ff0000",new $.jPicker.Color({"hex":o})),n=t.find(".rgb-color"),i=t.find(".hsl-color"),s=(m(o),await this._options.history.init(),t.show(),this._options.history.get()),c=[],p=0;p<s.length;p++)c.push(new $.jPicker.Color({"hex":s[p]}));for(var u=65-s.length,p=0;p<u;p++)c.push(new $.jPicker.Color({"hex":"#efefef"}));o=e=>cz.BrowserUtils.escapeHTML(browser.i18n.getMessage(e)),t={"window":{"title":"&nbsp;"},"color":{"active":e,"quickList":c,"mode":"last-color-picker-color-mode"in localStorageData?localStorageData["last-color-picker-color-mode"]:"h"},"images":{"clientPath":"/lib/jPicker/images/"},"localization":{"text":{"ok":o("ok"),"cancel":o("cancel"),"newColor":o("new_color_label"),"currentColor":o("current_color_label")},"tooltips":{"colors":{"newColor":o("new_color_commit_label"),"currentColor":o("click_to_revert")},"buttons":{"ok":o("commit_to_this_color"),"cancel":o("cancel_and_revert")},"hue":{"radio":o("set_to_hue_color_mode"),"textbox":o("enter_hue_value")},"saturation":{"radio":o("set_to_sat_color_mode"),"textbox":o("enter_sat_value")},"value":{"radio":o("set_to_val_color_mode"),"textbox":o("enter_val_value")},"red":{"radio":o("set_to_red_color_mode"),"textbox":o("enter_red_value")},"green":{"radio":o("set_to_green_color_mode"),"textbox":o("enter_green_value")},"blue":{"radio":o("set_to_blue_color_mode"),"textbox":o("enter_blue_value")},"hex":{"textbox":o("enter_hex_value")}}}};function m(e){e=cz.czRGBHexaAttributeToCol(e);n.val(cz.czColToRGBAttribute(e)),i.val(cz.czColToHSLAttribute(e))}a._widget.jPicker(t,function(e){(o=$('.jPicker input[type="radio"]:checked').val())&&(browser.storage.local.set({"last-color-picker-color-mode":o}),localStorageData["last-color-picker-color-mode"]=o);var o="#"+e.val("hex");l||(o=o.toUpperCase()),r(o),a.hide()},function(e){m("#"+e.val("hex"))},function(e){a.hide()}),setTimeout(function(){a.adjustColorPickerUI()},1)},"hide":function(){this._container.hide(),this._options.closeCallback()},"adjustColorPickerUI":function(){var r=this;$(".jPicker input.Hex").attr("maxlength","7");r._widget.find(".Grid .QuickColor").slice(-7).remove();var e=$("<span/>",{"class":"QuickColor","style":"background-color:#efefef;background-image: url(/lib/jPicker/images/NoColor.png)","title":browser.i18n.getMessage("clear_history"),"html":"&nbsp;"}),o=r._widget.find(".Grid"),o=(e.appendTo(o),e.click(function(){var e=!!cz.BrowserUtils.platformIs("mac")||confirm(browser.i18n.getMessage("clear_history_question"));if(e){r._widget.find(".QuickColor").slice(0,-1).remove();for(var o=$(),t=0;t<65;t++)o=o.add("<span/>",{"class":"QuickColor","title":"","style":"background-color:#efefef;cursor:default","html":"&nbsp;"});e=r._widget.find(".Grid .QuickColor");$(o).insertBefore(e),r._options.history.clear()}}),r._widget.find("hr"));$("<div/>",{"class":"history-header","text":browser.i18n.getMessage("color_history_label")}).insertAfter(o)}},cz.ColorAnalyzerUI={"_isInited":!1,"_myPanel":null,"_colors":null,"init":function(e){var o;this._isInited||((o=this)._options=e,this._myPanel=e.container,this._myPanel.find(".ok-button").click(function(){o.activeColor&&o._options.setColorCallback(o.activeColor),o._options.highlightElementsByColorCallback(null),o.hidePageAnalyzerPanel(),o._options.closeCallback()}),this._myPanel.find(".cancel-button").click(function(){o._options.highlightElementsByColorCallback(null),o.hidePageAnalyzerPanel(),o._options.closeCallback()}),e=this._myPanel.find(".selected-color-info"),o.rgbColorElem=e.find(".rgb-color"),o.hexColorElem=e.find(".hex-color"),o.elemInfoElem=e.find(".elem-info"),o.colorsContainer=this._myPanel.find(".colors-container"),o.colorsContainer.click(function(e){o.setActiveColor(e.target,!0)}),this._isInited=!0)},"setActiveColor":function(e,o){var t=this;t._myPanel.removeClass("initial-state");if($(e).hasClass("color-panel")){o&&(void 0!==t.activeColorElem&&t.activeColorElem.removeClass("active"),$(e).addClass("active"),t.activeColorElem=$(e));var r=$(e).attr("cz-color"),e=cz.czRGBAttributeToCol(r),l=cz.czColToRGBAttribute(e),a=cz.czColToRGBHexaAttribute(e);o&&(t.activeColor=a),t.rgbColorElem.val(l),t.hexColorElem.val(a),t.elemInfoElem.empty();for(var n=0;n<t._colors[r].computed.length&&n<15;n++){var i=t._colors[r].computed[n];t.elemInfoElem.append($("<span/>",{"class":"color-selector","text":i.elemLongName})).append(" ")}t._options.highlightElementsByColorCallback(null),t._options.highlightElementsByColorCallback(e)}},"showPageAnalyzerPanelAndAnalyze":function(){this._myPanel.show(),this._myPanel.addClass("initial-state"),this.colorsContainer.empty().append($("<span/>",{"class":"please-wait","text":browser.i18n.getMessage("analyzing_please_wait")})),this._options.analyzePageColorsCallback()},"hidePageAnalyzerPanel":function(){this._myPanel.hide()},"populatePageAnalyzerColors":function(e){var o=[];for(l in this._colors=e)o.push(l);o.sort(this.sortByHue);var t=this.colorsContainer;t.empty();for(var r=0;r<o.length;r++){var l=o[r];$("<div/>",{"class":"color-panel","cz-color":l,"css":{"background-color":l},"title":l,"html":"&nbsp;"}).appendTo(t)}},"sortByHue":function(e,o){o=cz.czRGBAttributeToCol(o),e=cz.czRGBAttributeToCol(e);var t=cz.czGetRValue(o),r=cz.czGetGValue(o),o=cz.czGetBValue(o),l=cz.czGetRValue(e),a=cz.czGetGValue(e),e=cz.czGetBValue(e),n=cz.czRGBToHSV(t,r,o),i=cz.czRGBToHSV(l,a,e),t=t==r&&r==o||n.s<3,r=l==a&&a==e||i.s<3;return t&&r?i.v-n.v:n.h==i.h||t||r?n.s!=i.s?n.s-i.s:n.v-i.v:n.h-i.h}},cz.PaletteBrowser={"_inited":!1,"init":function(o,t){var r,l;this._inited?t():(r=this,(l=new XMLHttpRequest).open("get","/js/palette-db.json",!0),l.onreadystatechange=function(e){4==l.readyState&&(ColorZilla.PaletteDB=JSON.parse(l.responseText).palettes,r.initDelayed(o),t())},l.send({}),this._inited=!0)},"initDelayed":function(e){var e=(this._options=e).container,o=(this._container=e).find(".palette-chooser"),r=(this.populatePaletteChooser(o),this);o.change(function(){var e=o.val();r.showPalette(e),browser.storage.local.set({"last-displayed-palette":e}),localStorageData["last-displayed-palette"]=e}),this._container.find(".palette-colors").click(function(e){var o,t,e=$(e.target);e.hasClass("color-panel")&&(r._currentColorPanel&&r._currentColorPanel.removeClass("active"),e.addClass("active"),o=e.attr("cz-color"),t=e.attr("cz-color-name"),r.setCurrentColor(o,t),r._currentColorPanel=e)}),this._container.find(".ok-button").click(function(){r._currentColor&&r._options.setColorCallback(r._currentColor),r.hide(),r._options.closeCallback()}),this._container.find(".cancel-button").click(function(){r.hide(),r._options.closeCallback()})},"setCurrentColor":function(e,o){var t,r,l;(this._currentColor=e)?(t=cz.czRGBHexaAttributeToCol(e),this._container.find(".current-color").css("background-color",e),e=cz.czGetRValue(t),r=cz.czGetGValue(t),l=cz.czGetBValue(t),this._container.find(".color-r").val(e),this._container.find(".color-g").val(r),this._container.find(".color-b").val(l),this._container.find(".color-hex").val(cz.czColToRGBHexaAttribute(t)),void 0!==o&&o||(o=""),this._container.find(".color-name").val(o)):(this._container.find(".current-color").css("background-color","#fff"),this._container.find(".color-r").val(""),this._container.find(".color-g").val(""),this._container.find(".color-b").val(""),this._container.find(".color-hex").val(""),this._container.find(".color-name").val(""))},"populatePaletteChooser":function(t){me=this,cz.PaletteDB.forEach(function(e){var e=me.calcPaletteKey(e.name),o=browser.i18n.getMessage("palette_name_"+e);$("<option/>",{"value":e,"text":o}).appendTo(t)})},"calcPaletteKey":function(e){return e.toLowerCase().replace(/[ \t]/g,"")},"show":function(e){var t=this;this.init(e,function(){t._currentColorPanel=null,t.setCurrentColor(null);var e=t._container.find(".palette-chooser"),o="last-displayed-palette"in localStorageData?localStorageData["last-displayed-palette"]:e.val();t.showPalette(o),e.val(o),t._container.show()})},"hide":function(){this._container.hide()},"showPalette":function(e){for(var n,i=null,o=0;o<cz.PaletteDB.length;o++){var t=cz.PaletteDB[o];if(e==me.calcPaletteKey(t.name)){i=t;break}}i&&((n=this._container.find(".palette-colors")).empty(),setTimeout(function(){for(var e=260,o=(285<15*Math.floor(i.colors.length/i.nColumns)&&(e-=18),Math.floor(e/i.nColumns)),t=0;t<i.colors.length;t++){var r=i.colors[t].value,l=i.colors[t].name||"",a=r;l&&(a+=" - "+l),$("<div/>",{"class":"color-panel","cz-color":r,"cz-color-name":l,"title":a,"css":{"width":o,"height":15,"background":r}}).appendTo(n)}},10))}},document.addEventListener("DOMContentLoaded",async function(){await ColorZilla.Popup.initUI()},!1),window.addEventListener("load",function(){ColorZilla.Popup.init()},!1);