(()=>{var e={2043:function(e,t,o){var n,r;!function(i,a){"use strict";n=function(){var e=function(){},t="undefined",o=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],r={},i=null;function a(e,t){var o=e[t];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&o?s:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}function l(){for(var o=this.getLevel(),r=0;r<n.length;r++){var i=n[r];this[i]=r<o?e:this.methodFactory(i,o,this.name)}if(this.log=this.debug,typeof console===t&&o<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function d(e,t,o){return c(e)||u.apply(this,arguments)}function f(e,o){var a,s,c,u=this,f="loglevel";function p(e){var o=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+o+";"}catch(e){}}}function g(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var o=window.document.cookie,n=encodeURIComponent(f),r=o.indexOf(n+"=");-1!==r&&(e=/^([^;]+)/.exec(o.slice(r+n.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function y(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function v(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=o||d,u.getLevel=function(){return null!=c?c:null!=s?s:a},u.setLevel=function(e,t){return c=v(e),!1!==t&&p(c),l.call(u)},u.setDefaultLevel=function(e){s=v(e),g()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,y(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(i!==u&&(a=v(i.getLevel())),l.call(u),i===u)for(var e in r)r[e].rebuild()},a=v(i?i.getLevel():"WARN");var m=g();null!=m&&(c=v(m)),l.call(u)}(i=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new f(e,i.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=p),i},i.getLoggers=function(){return r},i.default=i,i},void 0===(r="function"==typeof n?n.call(t,o,t,e):n)||(e.exports=r)}()}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(2043),t=o.n(e);t().setLevel("error");const n=t(),r="captureOn";function i(e,t){chrome.runtime.sendMessage({type:"backgroundError",message:e,error:t,timestamp:(new Date).valueOf()})}function a(e,t){var o=new CustomEvent(e,{detail:t});window.dispatchEvent(o)}function s(e){!function(e,t){n.debug("about to load script for, but check if alrady exist "+e);let o=document.getElementsByTagName("script");for(let r=0;r<o.length;r++)if(o[r].src===e)return n.debug("Script already loaded:",e),void("function"==typeof t&&t());n.debug("script tag not found, about to load script for by insert tag "+e);const r=document.createElement("script");r.src=e,r.onload=()=>{n.debug("Script loaded:",e),"function"==typeof t&&t()},r.onerror=()=>{console.error("Script load error:",e)},(document.head||document.documentElement).appendChild(r)}(chrome.runtime.getURL("moesif.min.js"),(()=>{n.debug("finished injection moesif now sending a message to page"),setTimeout((()=>{a("initExternalMoesif",e)}),1)}))}async function c(){const e=await chrome.storage.local.get(["corsOn",r,"options"]),t=e.options,o=e[r];var i;n.debug("restartFromStorage isCaptureOn:"+o+" options: "+JSON.stringify(t)),o?t?.moesifApplicationId?(n.debug("about to try to start moesif capture"),s(t)):(i="Can not start capture Ajax due to lack of Moesif Application Id",chrome.notifications.create({type:"basic",iconUrl:"icon-16.png",title:"Error in Extension",message:i,priority:2})):(n.debug("about to try to stop moesif capture"),a("stopExternalMoesif"))}chrome.runtime.onMessage.addListener(((e,t,o)=>{switch(n.debug("receive message in content script"+e.msg),e.msg){case"turnOnCapture":case"turnOffCapture":case"refresh":c();break;default:n.debug("received bad message")}})),window.addEventListener("message",(function(e){e.source===window&&e.data&&(n.debug("message received from page script: "+e.data.type),e.data.type&&e.data.type.indexOf("send_to_moesif")>=0&&function(e,t,o){try{n.debug("about to send data to moesif "+e);var r=new XMLHttpRequest;r.open("POST",e),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("X-Moesif-Application-Id",o),r.setRequestHeader("X-Moesif-SDK","cors-extension/1.0.6"),r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<=300?n.debug("successfully sent"):i("failed to send data to moesif",new Error("error: xmlhttp.status")))},r.send(JSON.stringify(t)),n.debug("finished sending")}catch(e){n.debug("failed to send to moesif"),i("failed to send data to moesif",e)}}(e.data.url,e.data.data,e.data.moesifApplicationId))})),c()})()})();